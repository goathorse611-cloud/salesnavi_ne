<!-- RACI / Organization View (Module 4) - Blueprint ワークショップ -->
<div class="flex flex-col gap-6 pb-24">

  <!-- Header -->
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div>
      <h1 class="text-2xl font-bold text-slate-900 tracking-tight">体制・RACI</h1>
      <p class="text-slate-500 text-sm mt-1">推進チーム体制と各メンバーの責任範囲（RACI）を明確化します</p>
    </div>
    <div class="flex items-center gap-3">
      <button class="btn-secondary flex items-center gap-2">
        <span class="material-symbols-outlined text-[18px]">person_add</span>
        メンバー追加
      </button>
    </div>
  </div>

  <!-- RACI Legend -->
  <div class="bg-slate-50 rounded-xl border border-slate-200 p-4 flex flex-wrap gap-6">
    <div class="flex items-center gap-2">
      <span class="size-8 rounded bg-primary text-white flex items-center justify-center text-xs font-bold">R</span>
      <span class="text-sm text-slate-700"><strong>Responsible</strong> - 実行責任者</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="size-8 rounded bg-amber-500 text-white flex items-center justify-center text-xs font-bold">A</span>
      <span class="text-sm text-slate-700"><strong>Accountable</strong> - 説明責任者</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="size-8 rounded bg-green-500 text-white flex items-center justify-center text-xs font-bold">C</span>
      <span class="text-sm text-slate-700"><strong>Consulted</strong> - 相談先</span>
    </div>
    <div class="flex items-center gap-2">
      <span class="size-8 rounded bg-slate-400 text-white flex items-center justify-center text-xs font-bold">I</span>
      <span class="text-sm text-slate-700"><strong>Informed</strong> - 報告先</span>
    </div>
  </div>

  <!-- Team Structure -->
  <div class="bg-white rounded-xl border border-border-color shadow-card overflow-hidden">
    <div class="px-6 py-4 bg-slate-50 border-b border-border-color">
      <h3 class="text-sm font-bold text-slate-900">プロジェクトチーム構成</h3>
    </div>
    <div class="p-4">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- Member Card -->
        <div class="p-4 border border-slate-200 rounded-lg hover:border-primary/50 transition-colors">
          <div class="flex items-start gap-3">
            <div class="size-10 rounded-full bg-primary text-white flex items-center justify-center text-sm font-bold">
              PM
            </div>
            <div class="flex-1">
              <input type="text" data-field="member_1_name" class="w-full bg-transparent border-none p-0 text-sm font-bold text-slate-800 focus:ring-0" value="山田 太郎"/>
              <input type="text" data-field="member_1_role" class="w-full bg-transparent border-none p-0 text-xs text-slate-500 focus:ring-0 mt-1" value="プロジェクトマネージャー"/>
              <input type="email" data-field="member_1_email" class="w-full bg-transparent border-none p-0 text-xs text-primary focus:ring-0 mt-1" value="yamada@example.com"/>
            </div>
          </div>
        </div>

        <div class="p-4 border border-slate-200 rounded-lg hover:border-primary/50 transition-colors">
          <div class="flex items-start gap-3">
            <div class="size-10 rounded-full bg-amber-500 text-white flex items-center justify-center text-sm font-bold">
              SP
            </div>
            <div class="flex-1">
              <input type="text" data-field="member_2_name" class="w-full bg-transparent border-none p-0 text-sm font-bold text-slate-800 focus:ring-0" value="鈴木 花子"/>
              <input type="text" data-field="member_2_role" class="w-full bg-transparent border-none p-0 text-xs text-slate-500 focus:ring-0 mt-1" value="スポンサー"/>
              <input type="email" data-field="member_2_email" class="w-full bg-transparent border-none p-0 text-xs text-primary focus:ring-0 mt-1" value="suzuki@example.com"/>
            </div>
          </div>
        </div>

        <div class="p-4 border border-slate-200 rounded-lg hover:border-primary/50 transition-colors">
          <div class="flex items-start gap-3">
            <div class="size-10 rounded-full bg-green-500 text-white flex items-center justify-center text-sm font-bold">
              TL
            </div>
            <div class="flex-1">
              <input type="text" data-field="member_3_name" class="w-full bg-transparent border-none p-0 text-sm font-bold text-slate-800 focus:ring-0" value="佐藤 一郎"/>
              <input type="text" data-field="member_3_role" class="w-full bg-transparent border-none p-0 text-xs text-slate-500 focus:ring-0 mt-1" value="テクニカルリード"/>
              <input type="email" data-field="member_3_email" class="w-full bg-transparent border-none p-0 text-xs text-primary focus:ring-0 mt-1" value="sato@example.com"/>
            </div>
          </div>
        </div>

        <!-- Add Member Card -->
        <div class="p-4 border-2 border-dashed border-slate-200 rounded-lg flex items-center justify-center text-slate-400 hover:border-primary hover:text-primary transition-colors cursor-pointer min-h-[100px]">
          <div class="text-center">
            <span class="material-symbols-outlined text-2xl mb-1">person_add</span>
            <p class="text-xs font-medium">メンバーを追加</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- RACI Matrix -->
  <div class="bg-white rounded-xl border border-border-color shadow-card overflow-hidden">
    <div class="px-6 py-4 bg-slate-50 border-b border-border-color flex items-center justify-between">
      <h3 class="text-sm font-bold text-slate-900">RACI マトリクス</h3>
      <button class="text-sm text-primary font-medium hover:underline flex items-center gap-1">
        <span class="material-symbols-outlined text-[16px]">add</span>
        タスク追加
      </button>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full min-w-[800px]">
        <thead>
          <tr class="bg-slate-50 border-b border-slate-200">
            <th class="text-left px-4 py-3 text-xs font-bold text-slate-500 uppercase w-[250px]">タスク / 活動</th>
            <th class="text-center px-4 py-3 text-xs font-bold text-slate-500 uppercase w-[100px]">山田 太郎<br/><span class="font-normal text-slate-400">PM</span></th>
            <th class="text-center px-4 py-3 text-xs font-bold text-slate-500 uppercase w-[100px]">鈴木 花子<br/><span class="font-normal text-slate-400">SP</span></th>
            <th class="text-center px-4 py-3 text-xs font-bold text-slate-500 uppercase w-[100px]">佐藤 一郎<br/><span class="font-normal text-slate-400">TL</span></th>
            <th class="text-center px-4 py-3 text-xs font-bold text-slate-500 uppercase w-[100px]">顧客担当</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-slate-100 hover:bg-slate-50">
            <td class="px-4 py-3 text-sm text-slate-700 font-medium">プロジェクト計画策定</td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_1_1" class="raci-select size-10 rounded text-xs font-bold text-white bg-primary border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R" selected>R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_1_2" class="raci-select size-10 rounded text-xs font-bold text-white bg-amber-500 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A" selected>A</option>
                <option value="C">C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_1_3" class="raci-select size-10 rounded text-xs font-bold text-white bg-green-500 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C" selected>C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_1_4" class="raci-select size-10 rounded text-xs font-bold text-white bg-slate-400 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I" selected>I</option>
                <option value="">-</option>
              </select>
            </td>
          </tr>
          <tr class="border-b border-slate-100 hover:bg-slate-50">
            <td class="px-4 py-3 text-sm text-slate-700 font-medium">要件定義</td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_2_1" class="raci-select size-10 rounded text-xs font-bold text-white bg-green-500 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C" selected>C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_2_2" class="raci-select size-10 rounded text-xs font-bold text-white bg-slate-400 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I" selected>I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_2_3" class="raci-select size-10 rounded text-xs font-bold text-white bg-primary border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R" selected>R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_2_4" class="raci-select size-10 rounded text-xs font-bold text-white bg-amber-500 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A" selected>A</option>
                <option value="C">C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
          </tr>
          <tr class="border-b border-slate-100 hover:bg-slate-50">
            <td class="px-4 py-3 text-sm text-slate-700 font-medium">技術設計</td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_3_1" class="raci-select size-10 rounded text-xs font-bold text-white bg-slate-400 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I" selected>I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_3_2" class="raci-select size-10 rounded text-xs font-bold text-white bg-slate-400 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I" selected>I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_3_3" class="raci-select size-10 rounded text-xs font-bold text-white bg-primary border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R" selected>R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_3_4" class="raci-select size-10 rounded text-xs font-bold text-white bg-green-500 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C" selected>C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
          </tr>
          <tr class="border-b border-slate-100 hover:bg-slate-50">
            <td class="px-4 py-3 text-sm text-slate-700 font-medium">最終承認</td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_4_1" class="raci-select size-10 rounded text-xs font-bold text-white bg-green-500 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C" selected>C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_4_2" class="raci-select size-10 rounded text-xs font-bold text-white bg-amber-500 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A" selected>A</option>
                <option value="C">C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_4_3" class="raci-select size-10 rounded text-xs font-bold text-white bg-slate-400 border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R">R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I" selected>I</option>
                <option value="">-</option>
              </select>
            </td>
            <td class="text-center px-4 py-3">
              <select data-field="raci_4_4" class="raci-select size-10 rounded text-xs font-bold text-white bg-primary border-none focus:ring-2 focus:ring-primary text-center">
                <option value="R" selected>R</option>
                <option value="A">A</option>
                <option value="C">C</option>
                <option value="I">I</option>
                <option value="">-</option>
              </select>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>

<!-- Footer Actions -->
<div class="fixed bottom-0 left-0 right-0 md:left-64 border-t border-border-color bg-white p-4 px-8 flex justify-between items-center z-30 shadow-[0_-4px_20px_-5px_rgba(0,0,0,0.05)]">
  <div class="hidden sm:flex items-center gap-2">
    <span class="material-symbols-outlined text-green-500 text-[20px]">cloud_done</span>
    <span class="text-sm text-slate-500 font-medium">自動保存済み</span>
  </div>
  <div class="flex gap-3 w-full sm:w-auto">
    <button class="flex-1 sm:flex-none px-5 py-2.5 rounded-md border border-slate-300 text-slate-700 font-semibold text-sm hover:bg-slate-50 transition-colors" data-action="save-module">
      保存
    </button>
    <button class="flex-1 sm:flex-none px-6 py-2.5 rounded-md bg-primary text-white font-semibold text-sm hover:bg-primary-hover transition-colors shadow-sm flex items-center justify-center gap-2" data-action="complete-module">
      <span class="material-symbols-outlined text-[18px]">check</span>
      このモジュールを完了
    </button>
  </div>
</div>

<style>
.raci-select {
  appearance: none;
  cursor: pointer;
}
.raci-select option {
  background: white;
  color: #333;
}
</style>
