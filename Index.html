<!DOCTYPE html>
<html class="light" lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <base target="_top"/>
  <title>Blueprint ワークショップ</title>
  <?!= include('Stylesheet'); ?>
</head>
<body class="bg-background-light font-display text-text-main antialiased overflow-hidden h-screen flex">

<!-- Loading Overlay -->
<div id="loading-overlay" class="fixed inset-0 bg-white/80 z-[100] flex items-center justify-center hidden">
  <div class="flex flex-col items-center gap-3">
    <div class="animate-spin rounded-full h-10 w-10 border-4 border-primary border-t-transparent"></div>
    <p class="text-sm text-slate-600 font-medium">読み込み中...</p>
  </div>
</div>

<!-- Toast Container -->
<div id="toast-container" class="fixed top-4 right-4 z-[110] flex flex-col gap-2"></div>

<!-- Left Sidebar Navigation -->
<aside id="sidebar" class="w-64 bg-surface border-r border-border-color hidden md:flex flex-col h-full shadow-[2px_0_5px_rgba(0,0,0,0.02)] z-10 flex-shrink-0">
  <div class="h-16 flex items-center px-4 border-b border-border-color bg-white gap-3">
    <div class="bg-primary rounded-md size-8 flex items-center justify-center shadow-sm">
      <span class="material-symbols-outlined text-white text-xl">architecture</span>
    </div>
    <div class="flex flex-col">
      <span class="text-sm font-bold text-slate-800 leading-tight">Blueprint</span>
      <span class="text-[10px] text-slate-500 font-medium">ワークショップ</span>
    </div>
  </div>

  <nav class="flex-1 overflow-y-auto py-4 px-3 flex flex-col gap-1">
    <a class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-text-sub hover:bg-slate-50 hover:text-primary transition-colors group" href="#" data-view="home">
      <span class="material-symbols-outlined text-[20px] text-slate-400 group-hover:text-primary">home</span>
      <span class="text-sm font-medium">ホーム</span>
    </a>
    <a class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-text-sub hover:bg-slate-50 hover:text-primary transition-colors group" href="#" data-view="projectlist">
      <span class="material-symbols-outlined text-[20px] text-slate-400 group-hover:text-primary">folder_open</span>
      <span class="text-sm font-medium">プロジェクト管理</span>
    </a>

    <div class="my-2 border-t border-border-color mx-2"></div>
    <p class="px-3 py-2 text-xs font-bold text-slate-500 uppercase tracking-wider">モジュール</p>

    <a class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-text-sub hover:bg-slate-50 hover:text-primary transition-colors group" href="#" data-view="vision" data-module="1">
      <span class="material-symbols-outlined text-[20px] text-slate-400 group-hover:text-primary">flag</span>
      <span class="text-sm font-medium">1. 北極星ビジョン</span>
    </a>
    <a class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-text-sub hover:bg-slate-50 hover:text-primary transition-colors group" href="#" data-view="usecaseselect" data-module="2">
      <span class="material-symbols-outlined text-[20px] text-slate-400 group-hover:text-primary">checklist</span>
      <span class="text-sm font-medium">2. ユースケース選択</span>
    </a>
    <a class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-text-sub hover:bg-slate-50 hover:text-primary transition-colors group" href="#" data-view="90daysplan" data-module="3">
      <span class="material-symbols-outlined text-[20px] text-slate-400 group-hover:text-primary">calendar_month</span>
      <span class="text-sm font-medium">3. 90日計画</span>
    </a>
    <a class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-text-sub hover:bg-slate-50 hover:text-primary transition-colors group" href="#" data-view="raci" data-module="4">
      <span class="material-symbols-outlined text-[20px] text-slate-400 group-hover:text-primary">diversity_3</span>
      <span class="text-sm font-medium">4. 体制・RACI</span>
    </a>
    <a class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-text-sub hover:bg-slate-50 hover:text-primary transition-colors group" href="#" data-view="valuetracker" data-module="7">
      <span class="material-symbols-outlined text-[20px] text-slate-400 group-hover:text-primary">monitoring</span>
      <span class="text-sm font-medium">7. 価値トラッカー</span>
    </a>
  </nav>

  <!-- User Info Footer -->
  <div id="user-info" class="p-4 border-t border-border-color bg-slate-50">
    <div class="flex items-center gap-3">
      <div class="size-9 rounded-full bg-primary text-white flex items-center justify-center text-sm font-bold">
        <span id="user-initial">-</span>
      </div>
      <div class="flex flex-col min-w-0">
        <p id="user-name" class="text-sm font-semibold text-slate-800 truncate">読み込み中...</p>
        <p id="user-email" class="text-xs text-slate-500 truncate"></p>
      </div>
    </div>
  </div>
</aside>

<!-- Main Content Area -->
<main class="flex-1 flex flex-col min-w-0 bg-background-light">
  <!-- Header -->
  <header class="h-16 bg-surface border-b border-border-color px-6 flex items-center justify-between shadow-sm z-20 sticky top-0">
    <!-- Breadcrumb -->
    <nav id="breadcrumb" aria-label="Breadcrumb">
      <ol class="flex items-center space-x-2">
        <li><span class="text-sm font-bold text-slate-800">ホーム</span></li>
      </ol>
    </nav>

    <!-- Header Actions -->
    <div class="flex items-center gap-3">
      <!-- Search -->
      <div class="relative hidden sm:block group">
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400 group-focus-within:text-primary">
          <span class="material-symbols-outlined text-[20px]">search</span>
        </span>
        <input id="global-search" class="pl-10 pr-4 py-1.5 text-sm bg-white border border-slate-300 rounded-md focus:ring-1 focus:ring-primary focus:border-primary w-64 transition-all placeholder:text-slate-400 text-slate-700" placeholder="検索..." type="text"/>
      </div>

      <div class="h-6 w-px bg-slate-200 mx-1"></div>

      <!-- New Project Button -->
      <button id="btn-new-project" class="hidden sm:flex h-9 items-center gap-1.5 px-4 bg-primary hover:bg-primary-hover text-white text-sm font-semibold rounded-md shadow-sm transition-colors">
        <span class="material-symbols-outlined text-[18px]">add</span>
        <span>新規プロジェクト</span>
      </button>

      <!-- Notifications -->
      <button class="text-slate-500 hover:text-primary relative p-1.5 hover:bg-slate-50 rounded-md transition-colors">
        <span class="material-symbols-outlined text-[22px]">notifications</span>
      </button>

      <!-- Help -->
      <button class="text-slate-500 hover:text-primary p-1.5 hover:bg-slate-50 rounded-md transition-colors">
        <span class="material-symbols-outlined text-[22px]">help</span>
      </button>
    </div>
  </header>

  <!-- Dynamic Content Container -->
  <div id="content-container" class="flex-1 overflow-y-auto">
    <div id="view-content" class="max-w-[1400px] mx-auto px-6 py-8">
      <!-- Views will be loaded here dynamically -->
      <div class="flex flex-col items-center justify-center py-16 text-slate-500">
        <span class="material-symbols-outlined text-5xl mb-3">hourglass_empty</span>
        <p class="text-sm">コンテンツを読み込んでいます...</p>
      </div>
    </div>
  </div>
</main>

<!-- New Project Modal -->
<div id="modal-new-project" class="fixed inset-0 bg-black/50 z-[90] hidden items-center justify-center">
  <div class="bg-white rounded-lg shadow-xl w-full max-w-md mx-4">
    <div class="flex items-center justify-between p-4 border-b border-slate-200">
      <h3 class="text-lg font-bold text-slate-900">新規プロジェクト作成</h3>
      <button id="modal-close" class="text-slate-400 hover:text-slate-600 transition-colors">
        <span class="material-symbols-outlined">close</span>
      </button>
    </div>
    <form id="form-new-project" class="p-4 space-y-4">
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-1" for="input-customer-name">顧客名 <span class="text-red-500">*</span></label>
        <input id="input-customer-name" class="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-1 focus:ring-primary focus:border-primary text-sm" placeholder="例: 株式会社サンプル" required type="text"/>
      </div>
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-1" for="input-editors">編集者メール (カンマ区切り)</label>
        <input id="input-editors" class="w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-1 focus:ring-primary focus:border-primary text-sm" placeholder="例: user1@example.com, user2@example.com" type="text"/>
        <p class="text-xs text-slate-500 mt-1">プロジェクトを共同編集するユーザーのメールアドレス</p>
      </div>
      <div class="flex justify-end gap-3 pt-2">
        <button type="button" id="btn-cancel-project" class="px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-md hover:bg-slate-50 transition-colors">
          キャンセル
        </button>
        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:bg-primary-hover transition-colors">
          作成
        </button>
      </div>
    </form>
  </div>
</div>

<?!= include('ClientJS'); ?>
</body>
</html>
